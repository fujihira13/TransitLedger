---
title: "cc-sddを使って交通費管理PWAを作ってみた - Spec-Driven Development の実践記録"
emoji: "🚃"
type: "tech"
topics: ["cc-sdd", "React", "TypeScript", "PWA", "開発記録"]
published: false
---

## はじめに

この記事では、Spec-Driven Development（仕様駆動開発）のツールである **cc-sdd** を使って、交通費・交際費管理アプリを実際に開発した体験をまとめます。

cc-sdd の性能や使い勝手、実際の開発フロー、そして苦労した点や工夫したポイントを紹介していきます。

<!-- アプリの完成画面のスクリーンショットを挿入 -->
![完成したアプリの画面](画像URL)

## 作ったもの

**TransitLedger（交通費管理PWA）**

目的：交通費・交際費を最短入力で記録し、月次/期間で把握できるようにする。

### 主な機能

- **最短入力**：テンプレート/頻出金額/前回値の引き継ぎ
- **一覧の編集/削除**：フィルタ機能（今月/先月/月指定/区分）
- **月次・期間集計**：満足度評価と軽量分析
- **CSV/JSON出力**：データのバックアップと復元
- **PWA対応**：ホーム画面追加、オフライン動作

### 技術スタック

- **Frontend**: React 19 / TypeScript 5 / Vite 7
- **Routing**: React Router
- **Styling**: Tailwind CSS
- **Storage**: localStorage（クライアントのみ、ログイン不要）
- **Testing**: Vitest
- **Infra**: Firebase Hosting

完全にクライアントサイドのみで動作する、ローカルファーストな設計になっています。

<!-- アーキテクチャ図を挿入 -->
![アーキテクチャ概要図](画像URL)

---

## cc-sdd とは？

**cc-sdd（Cursor + Spec-Driven Development）** は、AI支援による仕様駆動開発を実現するツールです。

従来の開発では、要件→設計→実装という流れで進めても、各フェーズで認識のズレが生じて手戻りが発生しがちでした。

cc-sdd は以下のような特徴を持っています：

- **3フェーズの承認ワークフロー**：要件 → 設計 → タスク → 実装
- **各フェーズで人間のレビューを要求**（`-y` オプションで省略可能）
- **Steering（ステアリング）** による全体方針の管理
- **進捗確認コマンド** で開発状況を可視化

### 導入方法

```bash
npx cc-sdd@latest --cursor --lang ja
```

これで、`.kiro/` ディレクトリが作成され、Spec-Driven Development の環境がセットアップされます。

---

## 開発フロー

実際にどのように開発を進めたか、時系列で紹介します。

### Phase 0: Steering の設定（オプション）

開発の全体方針や技術スタックを決めるフェーズです。

```bash
/kiro/steering
```

このコマンドで、プロジェクトの全体設計（`product.md`、`tech.md`、`structure.md`）を整理しました。

- **product.md**: プロダクトの目的、ターゲットユーザー、解決する課題
- **tech.md**: 技術スタック、アーキテクチャの方針
- **structure.md**: ディレクトリ構成、ファイルの命名規則

<!-- Steering ファイルのスクリーンショットを挿入 -->
![Steering 設定画面](画像URL)

### Phase 1: 要件定義

```bash
/kiro/spec-init "交通費・交際費の記録管理アプリ"
/kiro/spec-requirements traffic-expenses
```

まずは ChatGPT に要件をマークダウン形式で出力してもらい、それを `.kiro/specs/traffic-expenses/requirements.md` に保存しました。

**要件のポイント**：

- 最短入力を実現するUI
- フィルタ・検索機能
- 月次/期間集計
- 満足度評価（1〜5）
- オフライン対応

<!-- 要件定義画面のスクリーンショット -->
![要件定義](画像URL)

### Phase 2: 設計

```bash
/kiro/spec-design traffic-expenses
```

cc-sdd が要件をもとに、システム設計を自動生成してくれます。

生成された `design.md` には以下のような情報が含まれていました：

- **コンポーネント設計**：どのような React コンポーネントを作るか
- **データモデル**：localStorage に保存するデータ構造
- **Service 層の設計**：ビジネスロジックの責務分離

この段階で、人間がレビューして修正を加えることができます。

<!-- 設計書のスクリーンショット -->
![設計書](画像URL)

### （オプション）設計のバリデーション

```bash
/kiro/validate-design traffic-expenses
```

設計に矛盾がないか、実装可能かをチェックします。

### Phase 3: タスク分割

```bash
/kiro/spec-tasks traffic-expenses
```

設計書をもとに、実装タスクを細かく分割してくれます。

タスクは優先度順に並べられ、以下のような形で出力されました：

1. ✅ ExpenseService の実装
2. ✅ StorageAdapter の実装
3. ✅ ExpenseForm コンポーネントの実装
4. ✅ ExpenseList コンポーネントの実装
5. ⬜ 集計機能の実装
6. ⬜ CSV/JSON エクスポート機能の実装

<!-- タスク一覧のスクリーンショット -->
![タスク分割](画像URL)

### Phase 4: 実装

```bash
/kiro/spec-impl traffic-expenses
```

このコマンドで、タスクを順番に実装していきます。

cc-sdd は、各タスクに必要なコードを自動生成してくれますが、細かい調整は人間が行います。

<!-- 実装中の画面のGIFを挿入 -->
![実装の様子](GIF_URL)

### （オプション）実装のバリデーション

```bash
/kiro/validate-impl traffic-expenses
```

実装がテスト可能か、設計通りに動作するかを確認します。

### 進捗確認

```bash
/kiro/spec-status traffic-expenses
```

いつでも現在の進捗状況を確認できます。

---

## 開発してみて良かった点

### 1. 手戻りが少ない

要件 → 設計 → タスク → 実装という流れを守ることで、「あれ、これどうするんだっけ？」という迷いが減りました。

### 2. 設計書が自動生成される

人間が一から書くのは大変ですが、cc-sdd が叩き台を作ってくれるので、レビューと修正に集中できました。

### 3. タスクが明確

「何を作るか」が明確になるので、作業に迷わず取り組めました。

### 4. ステアリングで方向転換しやすい

途中で「やっぱりこの機能は要らないかも」と思ったとき、Steering を更新するだけで全体の方針を調整できました。

---

## 苦労した点・工夫した点

### 1. 学習コスト

cc-sdd 自体が新しいツールなので、コマンドの使い方やワークフローに慣れるまで少し時間がかかりました。

### 2. 既存のコードベースへの適用

今回は新規開発だったので問題ありませんでしたが、既存プロジェクトに導入する場合は `/kiro/validate-gap` でギャップを確認する必要があります。

### 3. AI の出力の品質

設計書やタスクは自動生成されますが、100% 完璧ではありません。人間がレビューして修正する必要があります。

特に、以下のような点に注意が必要でした：

- **データ構造の詳細**：型定義が曖昧な場合がある
- **エラーハンドリング**：想定外のケースの考慮が甘い
- **UI/UX の細かい挙動**：ユーザー体験に関わる部分は人間の判断が必要

### 4. localStorage の制限

localStorage には容量制限（5MB 程度）があるため、大量のデータを扱う場合は IndexedDB への移行を検討する必要があります。

---

## 性能・結果

### 開発スピード

| 項目 | 所要時間 |
|---|---|
| 要件定義 | 約 1 時間 |
| 設計 | 約 2 時間 |
| タスク分割 | 約 30 分 |
| 実装 | 約 8 時間 |
| テスト・調整 | 約 3 時間 |
| **合計** | **約 14.5 時間** |

cc-sdd を使わなかった場合、おそらく 20〜30 時間はかかっていたと思います。

### アプリの性能

| 測定内容 | 実測値 | 備考 |
|---|---|---|
| 初回ロード時間 | 約 0.8 秒 | モバイル（4G）環境 |
| データ表示（一覧） | 約 50ms | localStorage 読み込み含む |
| CSV 出力 | 約 100ms | データ量 100 件時 |
| メモリ使用量 | 約 15MB | Chrome DevTools で確認 |

PWA として動作するため、2 回目以降のロードはほぼ瞬時です。

<!-- パフォーマンス計測結果のスクリーンショット -->
![Lighthouse スコア](画像URL)

---

## アプリの使い方（簡単なデモ）

### 1. 経費の追加

最短入力を実現するため、以下の機能を実装しました：

- **金額のクイック選択**：よく使う金額（150円、200円、500円など）をボタンで選択
- **前回値の引き継ぎ**：前回入力した内容を自動で表示
- **テンプレート機能**：よく使う経路や項目を保存

<!-- 経費追加画面のGIF -->
![経費追加の様子](GIF_URL)

### 2. 一覧表示とフィルタ

入力した経費を一覧表示し、以下のフィルタで絞り込みできます：

- **期間**：今月/先月/月指定/カスタム期間
- **カテゴリ**：交通費/交際費/その他
- **満足度**：1〜5 の評価で絞り込み

<!-- フィルタ機能のGIF -->
![フィルタ機能](GIF_URL)

### 3. 集計と分析

月次または任意の期間で集計し、以下の情報を表示します：

- **合計金額**
- **カテゴリ別の内訳**
- **満足度の平均**
- **日次の推移グラフ**

<!-- 集計画面のスクリーンショット -->
![集計画面](画像URL)

### 4. CSV/JSON 出力

データをエクスポートして、他のツール（Excel など）で分析したり、バックアップとして保存できます。

<!-- エクスポート機能のスクリーンショット -->
![エクスポート](画像URL)

---

## 今後の改善予定

### 機能面

- **予算管理機能**：月ごとの予算を設定し、超過をアラート
- **定期支出の登録**：毎月固定の交通費などを自動入力
- **領収書のOCR読み取り**：写真から金額を自動抽出

### 技術面

- **IndexedDB への移行**：より大量のデータに対応
- **クラウド同期**：複数デバイスでデータを共有
- **E2E テスト**：Playwright などでテストを自動化
- **パフォーマンス最適化**：大量データでもサクサク動くように

### UI/UX

- **ダークモード対応**
- **アクセシビリティの改善**
- **アニメーション**：より滑らかな操作感

---

## まとめ

cc-sdd を使って交通費管理アプリを開発した結果、以下のことがわかりました：

### メリット

- ✅ **開発スピードが向上**：手戻りが少なく、効率的に開発できた
- ✅ **設計の質が上がる**：AI が叩き台を作ってくれるので、レビューに集中できる
- ✅ **タスク管理が楽**：何をやるべきかが明確になる
- ✅ **方向転換しやすい**：Steering で全体方針を柔軟に変更できる

### デメリット

- ⚠️ **学習コスト**：新しいツールなので、慣れるまで時間がかかる
- ⚠️ **AI の限界**：100% 完璧な出力ではないので、人間のレビューが必須
- ⚠️ **既存プロジェクトへの適用**：新規開発の方が向いている

### こんな人におすすめ

- 個人開発やスタートアップで、素早くプロトタイプを作りたい人
- 設計書を書くのが苦手で、AI に叩き台を作ってほしい人
- 要件と実装のズレを減らしたい人

---

## 参考情報

- **TransitLedger リポジトリ**：[GitHub](リポジトリURL)
- **cc-sdd**：[公式サイト](公式URL)
- **書きかけの記事**：[Zenn スクラップ](https://zenn.dev/sakana199/scraps/73ae647f65d87c)

---

## おわりに

cc-sdd は、まだ新しいツールですが、Spec-Driven Development の考え方は非常に有用だと感じました。

特に、個人開発や小規模なチームでは、設計フェーズを省略してしまいがちですが、cc-sdd を使うことで「設計」のハードルが下がり、より品質の高いアプリを作れるようになると思います。

もし興味を持った方がいれば、ぜひ試してみてください！

質問や改善案があれば、コメントやTwitterでお気軽にどうぞ。

---

### Discussion

<!-- Zenn のディスカッション機能を使う場合 -->

何か質問や感想があれば、お気軽にコメントください！
